<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cayo Perico AI Heist Planner v4.5</title>
    <!-- Link to the separated CSS file -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

<div class="container">
    <header>
        <div class="header-left">
            <button id="hamburger-btn" class="hamburger-btn">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <h1>Cayo Planner v4.5</h1>
        </div>
        <div class="status">OPTIMIZER: ONLINE</div>
    </header>

    <!-- SLIDE-OUT MENU (HACK & STATS) -->
    <div id="side-menu" class="side-menu">
        <div class="menu-header">
            <h2>SYSTEM HACK</h2>
            <button id="close-menu" class="close-btn">&times;</button>
        </div>
        
        <div class="minigame-container">
            <div class="hack-status" id="hack-status">MATCH TARGET: <span id="hack-target">000</span></div>
            
            <div class="hack-board" id="hack-board">
                <!-- SVG Overlay for lines -->
                <svg id="hack-svg" class="hack-svg"></svg>
                
                <div class="column left-col" id="hack-inputs">
                    <!-- Numbers Generated by JS -->
                </div>
                
                <div class="column right-col" id="hack-outputs">
                    <!-- Multipliers (Fixed) -->
                    <div class="hack-node right-node" data-mult="10">
                        <div class="symbol symbol-x">âœ•</div>
                        <div class="anchor right-anchor"></div>
                    </div>
                    <div class="hack-node right-node" data-mult="1">
                        <div class="symbol symbol-square">
                            <div class="sq-half"></div>
                        </div>
                        <div class="anchor right-anchor"></div>
                    </div>
                    <div class="hack-node right-node" data-mult="2">
                        <div class="symbol symbol-lines">
                            <div class="line"></div>
                            <div class="line"></div>
                            <div class="cut"></div>
                        </div>
                        <div class="anchor right-anchor"></div>
                    </div>
                </div>
            </div>

            <button id="reset-hack" class="hack-btn">RESET SIGNAL</button>
        </div>

        <div class="traffic-stats">
            <h3>NETWORK TRAFFIC</h3>
            <div class="stat-line">TOTAL HACKERS: <span id="total-visits" class="loading">...</span></div>
            <div class="stat-line">ACTIVE SIGNALS: <span id="active-users" class="loading">...</span></div>
        </div>
    </div>
    <div id="menu-overlay" class="menu-overlay"></div>

    <!-- LEFT PANEL: Inputs -->
    <section class="panel">
        <div class="panel-header">Mission Config</div>
        
        <div class="input-group">
            <label>Difficulty</label>
            <select id="mode" onchange="calculate()">
                <option value="standard">Normal</option>
                <option value="hard">Hard Mode (+10%)</option>
            </select>
        </div>

        <div class="input-group">
            <label>Players</label>
            <input type="number" id="players" value="1" min="1" max="4" oninput="calculate()">
            <div id="solo-warning" class="warning-text">SOLO PROTOCOL: Gold & Cash require 2 keycards. Ignored.</div>
        </div>

        <div class="panel-header" style="margin-top: 20px;">Scope Out Results</div>

        <div class="input-group">
            <label>Primary Target</label>
            <select id="primary" onchange="calculate()">
                <!-- Populated by JS -->
            </select>
        </div>
        
        <!-- Primary Target Image Display -->
        <div class="target-display" id="target-img-container">
            <span class="target-icon">ðŸ’Ž</span>
        </div>

        <div id="secondary-inputs">
            <!-- Secondary inputs populated by JS -->
        </div>
    </section>

    <!-- CENTER PANEL: AI Logic -->
    <section class="panel">
        <div class="panel-header ai-title">AI OPTIMIZATION ENGINE</div>
        
        <div id="ai-output" class="ai-box">
            Awaiting input data...
        </div>

        <div id="bags-container">
            <!-- Dynamic bags will appear here -->
        </div>
    </section>

    <!-- RIGHT PANEL: Financials -->
    <section class="panel">
        <div class="panel-header">Financial Estimate</div>
        
        <div class="stat-row">
            <span>Primary Target</span>
            <span id="val-primary" class="stat-value">$0</span>
        </div>
        <div class="stat-row">
            <span>Secondary Loot</span>
            <span id="val-secondary" class="stat-value">$0</span>
        </div>
        <div class="stat-row">
            <span>Office Safe (Avg)</span>
            <span id="val-safe" class="stat-value">$0</span>
        </div>
        <div class="stat-row" style="color: var(--alert-red);">
            <span>Fencing Fee (10%)</span>
            <span id="val-fencing" class="stat-value">-$0</span>
        </div>
        <div class="stat-row" style="color: var(--alert-red);">
            <span>Pavel's Cut (2%)</span>
            <span id="val-pavel" class="stat-value">-$0</span>
        </div>

        <div class="stat-row total-row">
            <span>NET TAKE</span>
            <span id="val-net" class="stat-value">$0</span>
        </div>
    </section>
</div>

<!-- Load Config FIRST, then App Logic as Module -->
<script src="js/config.js"></script>
<script type="module" src="js/app.js"></script>

</body>
</html>